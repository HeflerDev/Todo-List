!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=(()=>{const e=(e,t)=>{let n=localStorage.getItem(e),o=-1;return JSON.parse(n).forEach((e,n)=>{let a=JSON.parse(e);t===a.name?o=n:console.log("findDataIndexByKey:Error: No matching found")}),o},t=(t,n)=>{let o=JSON.parse(localStorage.getItem(t));return JSON.parse(o[e(t,n)])},n=(t,n)=>{let o=JSON.parse(localStorage.getItem(t));o.splice(e(t,n),1),localStorage.removeItem(t),localStorage.setItem(t,JSON.stringify(o))},a=(e,t)=>{let n=JSON.parse(localStorage.getItem(e));localStorage.removeItem(e),n.unshift(JSON.stringify(t)),localStorage.setItem(e,JSON.stringify(n))},r=(e,t,n)=>{let a=o.findDataIndexByKey(e,t),r=JSON.parse(localStorage.getItem(e)),c=JSON.parse(r[a]),l=-1;return c.todos.forEach((e,t)=>{JSON.parse(e)[0]===n&&(l=t)}),l};return{addNewTaskToProject:a,addNewTodoToTask:(t,o,r)=>{let c=e(t,o.name);if(-1!==c){let e=JSON.parse(localStorage.getItem(t)),l=JSON.parse(e[c]);l.todos.push(JSON.stringify([r,!1])),n(t,o.name),a(t,l)}},createNewProject:e=>{localStorage.setItem(e,JSON.stringify([]))},removeTaskFromProject:n,removeTodoFromTask:(e,o,c)=>{let l=t(e,o);l.todos.splice(r(e,o,c),1),n(e,o),a(e,l)},findDataIndexByKey:e,getTodoIndex:r,checkIfTodoIsCompleted:(e,t,n)=>{let a=o.findDataIndexByKey(e,t),c=JSON.parse(localStorage.getItem(e)),l=JSON.parse(c[a]).todos[r(e,t,n)];return JSON.parse(l)[1]},changeTodoState:(e,t,r)=>{let c=JSON.parse(localStorage.getItem(e)),l=JSON.parse(c[o.findDataIndexByKey(e,t)]),i=l.todos.splice(o.getTodoIndex(e,t,r),1);i=JSON.parse(i),!1===i[1]?i[1]=!0:i[1]=!1,l.todos.push(JSON.stringify(i)),n(e,t),a(e,l)},changeTaskState:(t,o)=>{console.log(t,o);let r=JSON.parse(localStorage.getItem(t)),c=JSON.parse(r[e(t,o)]);c.status=!0,n(t,o),a(t,c)},checkForProjectExistence:()=>localStorage.length>0,retrieveTaskData:t,gatherStorageData:()=>{let e=0,t=0;return Object.keys(localStorage).forEach(n=>{JSON.parse(localStorage.getItem(n)).forEach(n=>{!0===JSON.parse(n).status?e+=1:t+=1})}),{completed:e,uncomplete:uncompleteTasks}}}})();var a=o;var r={createTaskObj:(e,t,n,o)=>({name:e,content:t,difficulty:n,date:o,status:!1,todos:[]}),validateProjectInput:e=>/^[a-zA-Z]/g.test(e),validateTodoInput:e=>/^[a-zA-Z]/.test(e),validateTaskInput:e=>{let t=[];return console.log(t),/^[a-zA-Z]/.test(e.name)||t.push("Task name must start with an letter"),e.content||t.push("Task content must exist"),Date.parse(e.date)||t.push("Invalid Date input"),!(t.length>0)||t},convertToValidId:e=>e.replace(/\s/g,"-")};var c={container:(e,t,n=null,o="div")=>{let a=document.createElement(o);return e&&(a.id=r.convertToValidId(e)),t=r.convertToValidId(t),n&&(Array.isArray(n)?n.forEach(e=>{a.classList.add(e)}):a.classList.add(n)),document.getElementById(t).appendChild(a),a}};var l={renderProject:e=>{c.container("project-"+e,"content-section",["box"]),c.container(`project-${e}-container`,"project-"+e,["flex-grid","project-container"]),c.container(`project-${e}-name`,`project-${e}-container`,["col-12","col-m-10"]),c.container(e,`project-${e}-name`,["minibox","center"],"h2").textContent=e;let t=c.container(`project-${e}-button`,`project-${e}-container`,["col-2","minibox","no-margin"],"button");return t.textContent="Add New Task",t},renderTask:(e,t)=>{c.container(`task-${e}-${t.name}`,"project-"+e,["task-container"]),c.container(`task-${e}-${t.name}-name-container`,`task-${e}-${t.name}`,["flex-grid"]);let n=c.container(`task-${e}-${t.name}-complete-task-btn`,`task-${e}-${t.name}-name-container`,["col-1","complete-btn"],"button");c.container(`task-${e}-${t.name}-name`,`task-${e}-${t.name}-name-container`,["col-10","task-field","minibox","column"]),c.container(`task-${e}-${t.name}-name-text`,`task-${e}-${t.name}-name`).textContent=t.name,c.container(`task-${e}-${t.name}-content-container`,`task-${e}-${t.name}`,["flex-grid"]),c.container(`task-${e}-${t.name}-content`,`task-${e}-${t.name}-content-container`,["col-10","task-field"]).textContent=t.content,c.container(`task-${e}-${t.name}-content-container-buttons`,`task-${e}-${t.name}-content-container`,["col-2","flex-grid","minibox"]);let o=c.container(`task-${e}-${t.name}-edit-button`,`task-${e}-${t.name}-content-container-buttons`,["btn-secondary","col-12"],"button");o.textContent="Edit Task";let a=c.container(`task-${e}-${t.name}-delete-button`,`task-${e}-${t.name}-content-container-buttons`,["btn-danger","col-12"],"button");a.textContent="Delete Task",c.container(`task-${e}-${t.name}-details-container`,`task-${e}-${t.name}`,["flex-grid"]);let r=c.container(`task-${e}-${t.name}-details-difficulty`,`task-${e}-${t.name}-details-container`,["col-6","task-field"]);r.textContent=t.difficulty;let l=c.container(`task-${e}-${t.name}-details-date`,`task-${e}-${t.name}-details-container`,["col-6","task-field"]);l.textContent=t.date,c.container(`task-${e}-${t.name}-todo`,`task-${e}-${t.name}`);let i=c.container(`task-${e}-${t.name}-todo-button`,`task-${e}-${t.name}`,["btn-secondary","col-12","margin-1"],"button");return i.textContent="Add new Todo",{todoBtn:i,editBtn:o,deleteBtn:a,completeBtn:n,dateInfo:l,difficultyInfo:r}},newProjectBtn:()=>{c.container("new-project-btn-container","content-section",["flex-grid","center"]);let e=c.container("new-project-btn","new-project-btn-container",["new-project-btn"],"button");return e.textContent="+",e},renderTodo:(e,t,n)=>{c.container(`task-${e}-${t}-${n}-todo`,`task-${e}-${t}-todo`,"flex-grid");let o=c.container(`task-${e}-${t}-${n}-todo-container-button`,`task-${e}-${t}-${n}-todo`,["col-1","complete-btn"],"button");c.container(`todo-${e}-${t}-${n}-todo-container-description`,`task-${e}-${t}-${n}-todo`,"col-10").textContent=JSON.parse(n)[0];let a=c.container(`task-${e}-${t}-${n}-todo-container-button-delete`,`task-${e}-${t}-${n}-todo`,["col-1","btn-danger"],"button");return a.textContent="X",{checkBtn:o,deleteBtn:a}},noProjectWarning:()=>{let e=c.container("no-project-warning","content-section",["no-project-warning"]);return e.textContent='Nothing to display here. Press "+" to create a new project',e}};var i={newProjectForm:()=>{console.log("Rendering new Project form"),c.container("project-form-container","new-project-btn-container",["box","col-12"],"div"),c.container("project-form","project-form-container",["flex-grid"],"form"),c.container("p","project-form",["col-12"],"label").textContent="Project Name",c.container("project-name","project-form",["col-12"],"input");const e=c.container("project-submit-btn","project-form",["col-12","btn-primary"],"input");return e.type="submit",e.value="Create Project!",e},newTaskForm:e=>{console.log(`Rendering ${e} task form`),c.container("task-form-container",e,["box"]),c.container("task-form","task-form-container","flex-grid","form"),c.container("name-label","task-form",["col-12"],"label").textContent="Name",c.container("name-input","task-form",["col-12"],"input"),document.getElementById("task-form").appendChild(document.createElement("br")),c.container("content-label","task-form",["col-12"],"label").textContent="Content",c.container("content-input","task-form",["col-12"],"textarea"),document.getElementById("task-form").appendChild(document.createElement("br")),c.container("difficulty-label","task-form",["col-12"],"label").textContent="Difficulty",c.container("difficulty-select","task-form",["col-12"],"select");let t=c.container("difficulty-option-1","difficulty-select",null,"option");t.textContent="Easy",t.value="Easy";let n=c.container("difficulty-option-2","difficulty-select",null,"option");n.textContent="Medium",n.value="Medium";let o=c.container("difficulty-option-3","difficulty-select",null,"option");o.textContent="Hard",o.value="Hard",c.container("date-label","task-form",null,"label"),c.container("date-input","task-form",["col-6"],"input").type="date";let a=c.container("task-submit","task-form",["col-6"],"input");return a.value="Submit",a.type="submit",a},newTodoForm:()=>{c.container("todo-form-container","content-section",null,"form"),c.container("todo-form-label","todo-form-container",null,"label"),c.container("todo-form-input","todo-form-container",null,"input");let e=c.container("todo-form-submit","todo-form-container",null,"input");return e.value="Create Todo",e.type="submit",e}};(()=>{const e=()=>{document.getElementById("project-form")?alert("Form Already Displayed"):i.newProjectForm().addEventListener("click",()=>{let e=document.getElementById("project-name").value;r.validateProjectInput(e)&&(a.createNewProject(e),document.getElementById("project-form").remove(),t(),location.reload())})},t=()=>{Object.keys(localStorage).forEach(e=>{document.getElementById("project-"+r.convertToValidId(e))&&document.getElementById("project-"+r.convertToValidId(e)).remove(),l.renderProject(e).addEventListener("click",()=>{i.newTaskForm(e).addEventListener("click",()=>(e=>{let t=document.getElementById("name-input").value,n=document.getElementById("content-input").value,o=document.getElementById("difficulty-select").value,c=document.getElementById("date-input").value,l=r.createTaskObj(t,n,o,c);!0===r.validateTaskInput(l)?a.addNewTaskToProject(e,l):console.error("Data Submission returned FALSE")})(e))}),JSON.parse(localStorage.getItem(e)).forEach(n=>{let o=JSON.parse(n);if(!o.status){let c=l.renderTask(e,o);c.completeBtn.addEventListener("click",()=>{((e,n)=>{a.changeTaskState(e,n),t()})(e,o.name)}),c.todoBtn.addEventListener("click",()=>{i.newTodoForm().addEventListener("click",()=>{let t=document.getElementById("todo-form-input").value;r.validateTodoInput(t)?a.addNewTodoToTask(e,o,t):console.error("Invalid Input")})}),((e,t)=>{let n=a.retrieveTaskData(e,t);return Date.parse(n.date)<Date.now()})(e,o.name)&&c.dateInfo.classList.add("date-field-warning"),"Easy"==c.difficultyInfo.textContent?c.difficultyInfo.classList.add("easy-container"):"Medium"==c.difficultyInfo.textContent?c.difficultyInfo.classList.add("medium-container"):c.difficultyInfo.classList.add("hard-container"),o.todos.length>0&&o.todos.forEach(r=>{if(!a.checkIfTodoIsCompleted(e,JSON.parse(n).name,JSON.parse(r)[0])){let n=l.renderTodo(e,o.name,r);n.checkBtn.addEventListener("click",()=>((e,n,o)=>{a.changeTodoState(e,n,o),t()})(e,o.name,JSON.parse(r)[0])),n.deleteBtn.addEventListener("click",()=>((e,n,o)=>{a.removeTodoFromTask(e,n,o),t()})(e,o.name,JSON.parse(r)[0]))}}),c.deleteBtn.addEventListener("click",()=>{a.removeTaskFromProject(e,n),t()}),c.editBtn.addEventListener("click",()=>{let c=i.newTaskForm(e);(e=>{document.getElementById("name-input").value=e.name,document.getElementById("content-input").value=e.content})(JSON.parse(n)),c.addEventListener("click",()=>{if(r.validateTaskInput(o)){let o=(()=>{let e=document.getElementById("name-input").value,t=document.getElementById("content-input").value;return r.createTaskObj(e,t,null,null)})();a.removeTaskFromProject(e,n),a.addNewTaskToProject(e,o),t()}})})}})})};l.newProjectBtn().addEventListener("click",e),t(),console.log(a.checkForProjectExistence()),a.checkForProjectExistence()||l.noProjectWarning()})(),i.newTaskForm("Hello")}]);